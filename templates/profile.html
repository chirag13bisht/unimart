{% extends 'base.html' %}
{% block head %}
  <script src="https://cdn.tailwindcss.com"></script>
{% endblock %}

{% block main %}
<div>
  <div class="flex justify-center my-10">
    <div class="flex">
      <img src="https://source.boringavatars.com/beam/512/{{ user.username }}" class="rounded-full h-16 w-16">
      <div class="text-2xl font-bold ml-4">
        Username: {{user.username}}<br>
        College: {{user.university}}
        {% if user.course %}
          <br>Course: {{user.course}}
        {% endif %}
      </div>
    </div>
  </div>

  <div class="text-3xl ml-10">Product Listings</div>
  <div class="flex justify-center my-10">
    <div class="flex flex-wrap gap-6">
      {% if products %}
        {% for i in products %}
          <div class="max-w-sm bg-white border-2 border-[#F6931C] rounded-lg shadow mx-5">
            <a href="/mart/product/{{i.id}}">
              <img class="rounded-t-lg drop-shadow-xl h-48 w-full object-cover" src="/media/{{i.image}}" alt="" />
            </a>
            <div class="p-5">
              <a href="/mart/product/{{i.id}}">
                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">{{i.name}}</h5>
              </a>
              <p class="mb-2 font-semibold text-gray-700">Price: â‚¹{{i.price}}</p>
              </div>
          </div>
        {% endfor %}
      {% else %}
        <p class="text-gray-500">You have no active product listings.</p>
      {% endif %}
    </div>
  </div>

  <div class="text-3xl ml-10 mt-10">Rental Listings</div>
  <div class="flex justify-center my-10">
    <div class="flex flex-wrap gap-6">
      {% if rentals %}
        {% for i in rentals %}
          <div class="max-w-sm bg-white border-2 border-[#F6931C] rounded-lg shadow mx-5">
            <a href="/rental/product/{{i.id}}">
              <img class="rounded-t-lg drop-shadow-xl h-48 w-full object-cover" src="/media/{{i.image}}" alt="" />
            </a>
            <div class="p-5">
              <a href="/rental/product/{{i.id}}">
                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">{{i.name}}</h5>
              </a>
              <p class="mb-2 font-semibold text-gray-700">Price: {{i.price}}</p>
              </div>
          </div>
        {% endfor %}
      {% else %}
        <p class="text-gray-500">You have no active rental listings.</p>
      {% endif %}
    </div>
  </div>

  <div class="text-3xl ml-10 mt-10">My Study Groups</div>
  <div class="flex justify-center my-10">
    <div class="flex flex-wrap gap-6">
      {% if study_groups %}
        {% for group in study_groups %}
          <div class="max-w-sm p-5 bg-white border-2 border-[#F6931C] rounded-lg shadow-md">
            <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">{{ group.course_name }}</h5>
            <p class="mb-3 font-normal text-gray-700">Study group for {{ group.university_name }}.</p>
            <h6 class="font-semibold">Other Members:</h6>
            <ul class="list-disc list-inside text-gray-700">
              {% for member in group.members.all %}
                {% if member != request.user %}
                  <li>{{ member.username }}</li>
                {% endif %}
              {% endfor %}
            </ul>
          </div>
        {% endfor %}
      {% else %}
        <p class="text-gray-500">You haven't been added to any study groups yet. Make sure your 'Course' is filled out!</p>
      {% endif %}
    </div>
  </div>
  </div>
{% endblock main %}